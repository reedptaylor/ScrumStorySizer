@using Microsoft.JSInterop;

<div class="row">
    <div class="col">
        @foreach (List<SizeVote> group in groupList)
        {
            if (group.Count > 0)
            {
                int percent = group.Count * 100 / SizeVotes.Count;
                StorySize groupStorySize = group.FirstOrDefault().Size;
                string title = groupStorySize == StorySize.XXL ? "Story size 13. Needs to be broken up." : $"Story size {(int)groupStorySize}";
                <div class="mt-3 mb-2" title="@title">
                    <span class="progress-label mr-2">@group.FirstOrDefault().Size</span>
                    <div class="progress">
                        <div class="progress-bar" style="width: @(percent)%" aria-valuenow="@percent" aria-valuemin="0" aria-valuemax="100">@group.Count vote@(group.Count == 1 ? "" : "s")</div>
                    </div>
                </div>
                <div class="progress-note">@string.Join(", ", group.Select(item => item.User))</div>
            }
        }
    </div>
</div>
<div class="row">
    <div class="col">
        <div>Average Story Points: @avgStoryPoints.ToString("0.#")</div>
        <div>Rounded Story Size: @avgStorySize</div>
    </div>
</div>